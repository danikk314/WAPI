<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>
<body>

<p id="output">Warte auf Nachrichten...</p>

<script>
    const client = mqtt.connect("wss://qb0c8ff7.ala.eu-central-1.emqxsl.com:8084", {
        username: "webUs",
        password: "qaywsxedc",
        clientId: "webclient_" + Math.random().toString(16).substr(2, 8),
        clean: true,
        reconnectPeriod: 2000
    });

    const topic = "testtopic/1";

    client.on("connect", function () {
        console.log("Verbunden");
        client.subscribe(topic);
    });

    client.on("message", function (topic, message) {
        document.getElementById("output").textContent = message.toString();
    });

    client.on("error", function (err) {
        console.error("Fehler:", err);
    });
</script>

</body>
</html>
